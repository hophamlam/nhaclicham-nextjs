(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{2409:(e,s,t)=>{"use strict";t.d(s,{U:()=>i});var a=t(3865);function i(){return(0,a.createBrowserClient)("https://aekfivlrnrdzolsiipdf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFla2ZpdmxybnJkem9sc2lpcGRmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxNDU4NjksImV4cCI6MjA2NTcyMTg2OX0.yIkqGYpn_xqDYlLOAmmsW2zkHLR3mTOTG7lpYHktvyU")}},3783:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},3861:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},4616:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4639:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j,dynamic:()=>p});var a=t(5155),i=t(2409),n=t(2115),r=t(6695),c=t(285),l=t(3783),d=t(9074),h=t(4616),x=t(3861);let m=(0,t(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var o=t(6874),u=t.n(o),g=t(4852);let p="force-dynamic";function j(){let[e,s]=(0,n.useState)({totalEvents:0,upcomingEvents:0,notificationProviders:0,recentEvents:[]}),[t,o]=(0,n.useState)(!0),p=(0,i.U)();return((0,n.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await p.auth.getUser();if(!e)return;let{count:t}=await p.from("events").select("*",{count:"exact",head:!0}).eq("user_id",e.id),{data:a}=await p.from("events").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5),{count:i}=await p.from("notification_providers").select("*",{count:"exact",head:!0}).eq("user_id",e.id);s({totalEvents:t||0,upcomingEvents:0,notificationProviders:i||0,recentEvents:a||[]})}catch(e){console.error("Error fetching dashboard data:",e)}finally{o(!1)}})()},[p]),t)?(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.A,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Đang tải dữ liệu..."})]})]}),(0,a.jsx)("div",{className:"animate-pulse space-y-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"h-32 bg-muted rounded-lg"},e))})})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.A,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Tổng quan hệ thống nhắc lịch \xe2m của bạn"})]})]})}),(0,a.jsx)(g.default,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),"Sự kiện gần đ\xe2y"]})}),(0,a.jsx)(r.Wu,{children:e.recentEvents.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[e.recentEvents.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent/50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-foreground",children:e.note}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.is_lunar?"\xc2m lịch":"Dương lịch",e.is_lunar&&(0,a.jsxs)("span",{children:[" ","- ",e.lunar_day,"/",e.lunar_month]})]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString("vi-VN")})]},e.id)),(0,a.jsx)(u(),{href:"/app/events",children:(0,a.jsx)(c.$,{variant:"outline",className:"w-full mt-4",children:"Xem tất cả sự kiện"})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-muted mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Chưa c\xf3 sự kiện n\xe0o"}),(0,a.jsxs)(c.$,{className:"mt-4",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Tạo sự kiện đầu ti\xean"]})]})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Th\xf4ng b\xe1o v\xe0 c\xe0i đặt"]})}),(0,a.jsxs)(r.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-blue-900 dark:text-blue-200",children:"K\xeanh th\xf4ng b\xe1o"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e.notificationProviders>0?"".concat(e.notificationProviders," k\xeanh đ\xe3 cấu h\xecnh"):"Chưa c\xf3 k\xeanh th\xf4ng b\xe1o n\xe0o"})]}),(0,a.jsx)(u(),{href:"/app/notification-providers",children:(0,a.jsx)(c.$,{size:"sm",children:"Cấu h\xecnh"})})]})}),(0,a.jsx)("div",{className:"p-4 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-green-900 dark:text-green-200",children:"Hồ sơ của bạn"}),(0,a.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Quản l\xfd th\xf4ng tin c\xe1 nh\xe2n"})]}),(0,a.jsx)(u(),{href:"/app/profile",children:(0,a.jsx)(c.$,{size:"sm",variant:"outline",children:"Xem"})})]})})]})]})]})]})}},9095:(e,s,t)=>{Promise.resolve().then(t.bind(t,4639))}},e=>{var s=s=>e(e.s=s);e.O(0,[455,865,779,874,672,441,684,358],()=>s(9095)),_N_E=e.O()}]);