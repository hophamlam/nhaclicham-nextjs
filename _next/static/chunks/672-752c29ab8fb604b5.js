"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{285:(e,t,a)=>{a.d(t,{$:()=>c,r:()=>l});var r=a(5155);a(2115);var n=a(9708),o=a(2085),s=a(9434);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a,size:o,asChild:c=!1,...i}=e,d=c?n.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,s.cn)(l({variant:a,size:o,className:t})),...i})}},4852:(e,t,a)=>{a.d(t,{default:()=>u});var r=a(5155),n=a(2115),o=a(6695),s=a(3509),l=a(1284),c=a(2098),i=a(4186),d=a(9966);function u(e){let{className:t=""}=e,[a,u]=(0,n.useState)(null),[h,m]=(0,n.useState)({hasLeapYear:!1,leapMonths:[],currentMonthIsLeap:!1,leapMonthDetails:""}),[g,x]=(0,n.useState)(!0),[y,p]=(0,n.useState)(new Date),[v,f]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{let e=setInterval(()=>{p(new Date)},1e3);return()=>clearInterval(e)},[]),(0,n.useEffect)(()=>{(()=>{try{x(!0);let e=new Date,t=d.y.getLunarDetailInfo(e);if(t){console.log("Th\xf4ng tin \xe2m lịch chi tiết:",t),u(t);let e=t.lunarDate.year,a=d.y.getLeapMonths(e),r=a.length>0,n=t.lunarDate.isLeapMonth||!1,o="";if(r&&a.length>0&&t){let r=a[0],n=["","Gi\xeang","Hai","Ba","Tư","Năm","S\xe1u","Bảy","T\xe1m","Ch\xedn","Mười","Mười một","Chạp"][r]||"th\xe1ng ".concat(r);try{let a=d.y.convertLunarToSolar(1,r,e,!1),s=d.y.convertLunarToSolar(30,r,e,!1),l=d.y.convertLunarToSolar(1,r,e,!0),c=d.y.convertLunarToSolar(29,r,e,!0);o="Năm ".concat(t.yearName," (").concat(e,") c\xf3 th\xe1ng ").concat(n," nhuận:\n• Th\xe1ng ").concat(n," chuẩn: ").concat(a.toLocaleDateString("vi-VN")," - ").concat(s.toLocaleDateString("vi-VN"),".\n• Th\xe1ng ").concat(n," nhuận: ").concat(l.toLocaleDateString("vi-VN")," - ").concat(c.toLocaleDateString("vi-VN"),".\n• Trong năm n\xe0y sẽ c\xf3 hai th\xe1ng ").concat(n," \xe2m lịch.")}catch(a){o="Năm ".concat(t.yearName," (").concat(e,") c\xf3 th\xe1ng ").concat(n," nhuận.")}}m({hasLeapYear:r,leapMonths:a,currentMonthIsLeap:n,leapMonthDetails:o}),console.log("Th\xf4ng tin th\xe1ng nhuận:",{hasLeapYear:r,leapMonths:a,currentMonthIsLeap:n,leapMonthDetails:o})}else console.error("Kh\xf4ng thể lấy th\xf4ng tin \xe2m lịch")}catch(e){console.error("Lỗi lấy dữ liệu \xe2m lịch:",e)}finally{x(!1)}})()},[]),g||!a)return(0,r.jsxs)(o.Zp,{className:"lunar-card shadow-lg ".concat(t),children:[(0,r.jsx)(o.aR,{children:(0,r.jsxs)(o.ZB,{className:"flex items-center gap-3 text-2xl text-red-800 dark:text-red-300",children:[(0,r.jsx)(s.A,{className:"h-8 w-8 text-red-600 dark:text-red-400"}),(0,r.jsx)("span",{children:"Lịch \xe2m h\xf4m nay"})]})}),(0,r.jsx)(o.Wu,{className:"space-y-4",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:g?"Đang tải...":"Kh\xf4ng thể tải th\xf4ng tin \xe2m lịch"})})})]});let N=y.toLocaleTimeString("vi-VN",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),b=y.toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,r.jsxs)(o.Zp,{className:"lunar-card shadow-lg ".concat(t),children:[(0,r.jsx)(o.aR,{children:(0,r.jsxs)(o.ZB,{className:"flex items-center gap-3 text-2xl text-red-800 dark:text-red-300",children:[(0,r.jsx)(s.A,{className:"h-8 w-8 text-red-600 dark:text-red-400"}),(0,r.jsx)("span",{children:"Lịch \xe2m h\xf4m nay"})]})}),(0,r.jsx)(o.Wu,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"lunar-date mb-2",children:["Ng\xe0y ",a.lunarDate.day," th\xe1ng ",a.lunarDate.month,h.currentMonthIsLeap&&(0,r.jsxs)("span",{className:"text-orange-600 dark:text-orange-400",children:[" ","(nhuận)"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,r.jsxs)("p",{className:"text-xl text-red-700 dark:text-red-300 font-medium",children:["Năm ",a.yearName," (",a.lunarDate.year,")"]}),h.hasLeapYear&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.A,{className:"h-4 w-4 text-orange-600 dark:text-orange-400 cursor-help",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)}),v&&(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-4 py-3 bg-popover text-popover-foreground text-sm rounded-lg w-96 z-[100] shadow-xl border pointer-events-none",children:[(0,r.jsx)("div",{className:"whitespace-pre-line leading-relaxed text-left",children:h.leapMonthDetails}),(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-popover"})]})]})]}),h.currentMonthIsLeap&&(0,r.jsx)("p",{className:"text-sm text-orange-600 dark:text-orange-400 font-medium mb-2",children:(0,r.jsx)("span",{className:"px-2 py-1 bg-orange-100 dark:bg-orange-900/50 rounded-full text-xs",children:"Đ\xe2y l\xe0 th\xe1ng nhuận"})}),(0,r.jsxs)("div",{className:"space-y-1 mb-4 text-sm text-red-600 dark:text-red-400",children:[(0,r.jsxs)("p",{children:["Th\xe1ng ",a.monthName," • Ng\xe0y ",a.dayName]}),a.solarTerm&&(0,r.jsxs)("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:["Tiết kh\xed: ",a.solarTerm]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground border-t border-red-200/50 dark:border-red-800/50 pt-3",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:b})]}),a.luckyHours&&a.luckyHours.length>0&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300 mb-2",children:[(0,r.jsx)(i.A,{className:"inline h-4 w-4 mr-1"}),N," - Giờ ho\xe0ng đạo h\xf4m nay:"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:a.luckyHours.map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded text-xs",children:[e.name," (",e.time[0],"h-",e.time[1],"h)"]},t))})]})]})})]})}},6695:(e,t,a)=>{a.d(t,{BT:()=>c,Wu:()=>i,ZB:()=>l,Zp:()=>o,aR:()=>s});var r=a(5155);a(2115);var n=a(9434);function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...a})}},9434:(e,t,a)=>{a.d(t,{cn:()=>o});var r=a(2596),n=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}},9966:(e,t,a)=>{a.d(t,{y:()=>n});var r=a(1869);class n{static getTodayLunarDate(){let e=new Date;return this.convertSolarToLunar(e)}static convertSolarToLunar(e){try{let t=new r.SolarDate(e).toLunarDate().get();return{day:t.day,month:t.month,year:t.year,isLeapMonth:t.leap_month||!1,isLeapYear:t.leap_year||!1}}catch(a){console.error("Lỗi chuyển đổi dương lịch sang \xe2m lịch:",a);let t=e.getDate();return{day:Math.max(1,Math.min(30,t)),month:e.getMonth()+1,year:e.getFullYear()-621,isLeapMonth:!1,isLeapYear:!1}}}static convertLunarToSolar(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{let o=new r.LunarDate({day:e,month:t,year:a,leap_month:n});o.init();let s=o.toSolarDate().get();return new Date(s.year,s.month-1,s.day)}catch(r){return console.error("Lỗi chuyển đổi \xe2m lịch sang dương lịch:",r),new Date(a+621,t-1,e)}}static getNextLunarOccurrence(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,n=r.getFullYear();try{let o=this.convertLunarToSolar(e,t,n,a);if(o>=r)return o;return this.convertLunarToSolar(e,t,n+1,a)}catch(o){try{return this.convertLunarToSolar(e,t,n+1,a)}catch(s){return console.error("Kh\xf4ng thể t\xednh ng\xe0y \xe2m lịch sắp tới:",{lunarDay:e,lunarMonth:t,isLeapMonth:a,currentYear:n,error:o,nextYearError:s}),r}}}static calculateNotificationBaseDate(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(e.isLunar){let r=Number(e.lunarDay),n=Number(e.lunarMonth),o=e.lunarYear?Number(e.lunarYear):a.getFullYear();if(t)return this.getNextLunarOccurrence(r,n,!1,a);try{return this.convertLunarToSolar(r,n,o,e.isLeapMonth)}catch(e){return console.error("Error converting lunar to solar (case 1):",e),a}}{let r=new Date(e.solarDate);if(!t)return r;try{let e=this.convertSolarToLunar(r);return this.getNextLunarOccurrence(e.day,e.month,!1,a)}catch(e){return console.error("Error converting solar to lunar (case 4):",e),r}}}static shouldShowReminderToday(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getTodayLunarDate();return r.day===e&&r.month===t&&r.isLeapMonth===a}static formatLunarDate(e){let t=e.isLeapMonth?" (nhuận)":"";return"".concat(e.day,"/").concat(e.month,"/").concat(e.year).concat(t)}static getLunarDateText(e){let t=e.isLeapMonth?" nhuận":"";return"Ng\xe0y ".concat(e.day," th\xe1ng ").concat(["","Gi\xeang","Hai","Ba","Tư","Năm","S\xe1u","Bảy","T\xe1m","Ch\xedn","Mười","Mười một","Chạp"][e.month]).concat(t," năm ").concat(e.year)}static getLunarDetailInfo(e){try{let t=new r.SolarDate(e).toLunarDate(),a=t.get();return{lunarDate:{day:a.day,month:a.month,year:a.year,isLeapMonth:a.leap_month||!1,isLeapYear:a.leap_year||!1},yearName:t.getYearName(),monthName:t.getMonthName(),dayName:t.getDayName(),hourName:t.getHourName(),dayOfWeek:t.getDayOfWeek(),solarTerm:t.getSolarTerm(),luckyHours:t.getLuckyHours()}}catch(e){return console.error("Lỗi lấy th\xf4ng tin chi tiết \xe2m lịch:",e),null}}static isLeapYear(e){try{let t=new r.LunarDate({day:1,month:1,year:e});return t.init(),t.get().leap_year||!1}catch(e){return console.error("Lỗi kiểm tra năm nhuận:",e),!1}}static getLeapMonths(e){let t=[];try{let a=new Set;for(let t=1;t<=12;t++)for(let n=1;n<=28;n+=7)try{let o=new Date(e,t-1,n),s=new r.SolarDate(o).toLunarDate().get();s.year===e&&s.leap_month&&a.add(s.month)}catch(e){continue}t.push(...Array.from(a).sort((e,t)=>e-t))}catch(e){console.error("Lỗi lấy th\xe1ng nhuận:",e)}return t}}}}]);